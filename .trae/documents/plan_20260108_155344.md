# 封装通用布局组件方案

## 1. 方案概述

将当前项目中重复的头部导航栏和面包屑导航封装成一个通用的布局组件，提高代码复用性和可维护性。

## 2. 实现步骤

### 2.1 创建布局组件

1. **创建components目录**：如果不存在，创建`src/components`目录
2. **创建Layout组件**：在components目录下创建`Layout.tsx`文件

### 2.2 设计Layout组件结构

```tsx
// Layout.tsx
import React, { ReactNode } from 'react';
import { Layout, Menu, Breadcrumb } from 'antd';
import { useNavigate, useLocation } from 'react-router-dom';
import { Typography } from 'antd';

const { Header, Content, Footer } = Layout;
const { Title } = Typography;

interface LayoutProps {
  children: ReactNode;
  breadcrumbItems?: { name: string; path?: string }[];
}

export default function AppLayout({ children, breadcrumbItems }: LayoutProps) {
  const navigate = useNavigate();
  const location = useLocation();

  const getSelectedKey = () => {
    if (location.pathname === '/dashboard') return '2';
    return '1';
  };

  const handleMenuClick = (key: string) => {
    if (key === '1') navigate('/home');
    if (key === '2') navigate('/dashboard');
  };

  return (
    <Layout className="app-layout">
      <Header className="app-header">
        <Title level={4} className="app-logo">Sentry Admin</Title>
        <Menu
          mode="horizontal"
          selectedKeys={[getSelectedKey()]}
          onClick={({ key }) => handleMenuClick(key)}
          items={[
            { key: '1', label: '首页' },
            { key: '2', label: '信息面板' },
          ]}
        />
      </Header>
      <Content className="app-content">
        {breadcrumbItems && (
          <Breadcrumb className="app-breadcrumb">
            {breadcrumbItems.map((item, index) => (
              <Breadcrumb.Item 
                key={index} 
                onClick={() => item.path && navigate(item.path)}
              >
                {item.name}
              </Breadcrumb.Item>
            ))}
          </Breadcrumb>
        )}
        {children}
      </Content>
      <Footer className="app-footer">
        Sentry Admin ©2025 Created by Sentry
      </Footer>
    </Layout>
  );
}
```

### 2.3 创建样式文件

在`src/components`目录下创建`Layout.css`文件，定义布局组件的样式：

```css
/* Layout.css */
.app-layout {
  min-height: 100vh;
}

.app-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background-color: #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  padding: 0 24px;
}

.app-logo {
  margin: 0;
  color: #1890ff;
}

.app-content {
  padding: 24px;
  background-color: #f0f2f5;
  min-height: calc(100vh - 136px);
}

.app-breadcrumb {
  margin-bottom: 16px;
}

.app-footer {
  text-align: center;
  background-color: #fff;
  border-top: 1px solid #f0f0f0;
}
```

### 2.4 修改现有页面使用新布局组件

1. **修改Home页面**：

   * 移除原有的Layout组件

   * 引入新的AppLayout组件

   * 使用AppLayout包裹页面内容

2. **修改Dashboard页面**：

   * 移除原有的Layout组件

   * 引入新的AppLayout组件

   * 使用AppLayout包裹页面内容

3. **修改ErrorDetail页面**：

   * 移除原有的Layout组件

   * 引入新的AppLayout组件

   * 使用AppLayout包裹页面内容

   * 添加面包屑导航配置

### 2.5 更新页面样式

1. **移除页面中重复的布局样式**：

   * `home.css`中的布局样式

   * `dashboard.css`中的布局样式

   * `error-detail.css`中的布局样式

2. **保留页面特有的样式**：

   * 保留各页面特有的组件样式

   * 更新样式类名以适应新的布局结构

## 3. 代码修改点

### 3.1 创建组件文件

* `src/components/Layout.tsx`：通用布局组件

* `src/components/Layout.css`：布局组件样式

### 3.2 修改页面文件

1. **Home/index.tsx**：使用新的布局组件
2. **Dashboard/index.tsx**：使用新的布局组件
3. **ErrorDetail/index.tsx**：使用新的布局组件并添加面包屑

### 3.3 更新样式文件

1. **Home/index.css**：移除重复布局样式
2. **Dashboard/index.css**：移除重复布局样式
3. **ErrorDetail/index.css**：移除重复布局样式

## 4. 预期效果

1. **代码复用**：减少重复代码，提高可维护性
2. **统一布局**：确保所有页面的布局风格一致
3. **灵活配置**：支持自定义面包屑导航
4. **易于扩展**：方便后续添加侧边栏、用户信息等功能

## 5. 注意事项

1. **样式冲突**：确保新的布局样式不会与现有页面样式冲突
2. **路由适配**：确保导航菜单的选中状态与路由路径正确匹配
3. **面包屑配置**：为需要面包屑的页面提供正确的面包屑配置
4. **响应式设计**：确保布局组件在不同屏幕尺寸下正常显示

