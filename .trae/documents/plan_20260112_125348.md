# 导航栏用户信息与退出登录功能实现计划

## 1. 添加全局状态管理依赖

* **命令**: `npm install zustand`
* **选择理由**: Zustand是一个轻量级、易于使用的状态管理库，适合管理用户登录状态

## 2. 实现用户状态管理

* **文件**: `src/store/userStore.ts` (新建)
* **实现内容**:
  * 使用Zustand创建用户状态存储
  * 定义用户信息类型
  * 实现用户信息的获取、设置和清除方法
  * 实现登录和退出登录的逻辑
  * 集成本地存储，持久化用户状态

## 3. 登录页面优化

* **文件**: `src/pages/Login/index.tsx`
* **修改内容**:
  * 集成用户状态存储
  * 登录成功后调用store的登录方法，设置用户信息
  * 移除本地的导航逻辑，由store统一处理

## 4. 导航栏组件优化

* **文件**: `src/components/Layout/index.tsx`
* **修改内容**:
  * 从用户状态存储中获取用户信息
  * 在导航栏右侧添加用户信息展示区域
  * 实现用户头像和用户名显示
  * 添加退出登录按钮，调用store的退出登录方法

## 5. 路由保护增强

* **文件**: `src/App.tsx`
* **修改内容**:
  * 使用用户状态存储检查登录状态
  * 添加路由守卫，保护受限制的路由
  * 未登录用户访问受限制路由时重定向到登录页

## 6. 样式优化

* **文件**: `src/components/Layout/index.css`
* **修改内容**:
  * 添加用户信息区域的样式
  * 优化导航栏右侧布局

## 实现要点

1. **状态管理**: 使用Zustand创建集中式用户状态存储，替代原来的localStorage直接操作
2. **组件集成**: 各组件通过store hook获取和更新用户状态
3. **持久化**: 用户状态自动持久化到localStorage
4. **退出登录流程**: 清除用户状态，然后导航到登录页
5. **路由保护**: 基于store中的登录状态实现路由守卫
6. **UI设计**: 遵循现有设计风格，使用Ant Design组件实现用户信息展示和退出登录功能

## 技术栈

* **状态管理**: Zustand
* **UI组件**: Ant Design
* **路由**: React Router v6
* **本地存储**: localStorage